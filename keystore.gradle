ext {
    getKeystoreProperties = {
        def properties = new Properties()
        def config = 'local.properties'
        def configFile = rootProject.file(config)
        if (configFile.exists()) {
            configFile.withInputStream { properties.load(it) }
        } else {
            throw new GradleException("e: Cannot build ${realTasksName}, ${config} not found")
        }
        return properties
    }

    keystoreProperties = getKeystoreProperties()
}